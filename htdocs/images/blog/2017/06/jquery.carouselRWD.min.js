/*-------------------------------------------------------------------------
jquery.carouselRWD.js
MIT-style license. 
version 1.0
2017 Masa 
http://web-diy.rdy.jp/
--------------------------------------------------------------------------*/
$(function(){$.fn.carouselRWD=function(b){var d,h,c,f,g=1;var a=$.extend({$speed:500,$interval:3000,$indicatorFlag:true,$loopFlag:true},b);return this.each(function(){var z=$(this),v=z.find(".carousel-view"),y=v.find(".carousel-contents"),s=y.find(".item"),l=s.find("img"),x=z.find("ul.list-indicator"),r=z.find("p.prev a"),u=z.find("p.next a"),t=s.length,q=s.width(),k=l.width();var p=false,w;var m=function(){w=setInterval(function(){n()},a.$interval)};if(a.$loopFlag===true){m()}if(t>1){if(a.$indicatorFlag===true){for(var o=1;o<=t;o++){x.append('<li><a href="#">'+o+"枚目</a></li>")}}x.find("li").first().addClass("current");if(a.$loopFlag===false){r.parent().hide()}s.css("width",k);s.first().clone().addClass("clone-f").appendTo(y);s.last().clone().addClass("clone-l").prependTo(y);y.find(".clone-l").next().addClass("current");y.css("width",q*(t+2));y.css("left",-q)}if(t===1){r.parent().remove();u.parent().remove();x.remove()}var n=function(){clearInterval(w);if(!y.is(":animated")){g++;y.find(".current").removeClass("current").next().addClass("current");x.find(".current").removeClass("current");x.find("li").eq(g-1).addClass("current");if(g>t){x.find("li").eq(0).addClass("current")}y.animate({left:-q*g},a.$speed,function(){if(g>t){y.find(".current").removeClass("current");y.find(".clone-l").next().addClass("current");y.css("left",-q);g=1}})}if(a.$loopFlag===false){if(g===t){u.parent().hide()}if(g!==1){r.parent().show()}}m()};var j=function(){clearInterval(w);if(!y.is(":animated")){g--;y.find(".current").removeClass("current").prev().addClass("current");x.find(".current").removeClass("current");x.find("li").eq(g-1).addClass("current");if(g>t){x.find("li").eq(0).addClass("current")}y.animate({left:-q*g},a.$speed,function(){if(g<1){y.find(".current").removeClass("current");y.find(".clone-f").prev().addClass("current");y.css("left",-q*t);g=t}})}if(a.$loopFlag===false){if(g===1){r.parent().hide()}if(g!==1){u.parent().show()}}};u.click(function(){n();clearInterval(w);return false});r.click(function(){j();return false});x.find("li a").click(function(){clearInterval(w);if(!y.is(":animated")){var i=$(this).parent().index()+1;g=i;x.find(".current").removeClass("current");$(this).parent().addClass("current");y.find(".current").removeClass("current");s.eq(g-1).addClass("current");y.animate({left:-q*g},a.$speed,function(){})}if(a.$loopFlag===false){if(g===1){r.parent().hide();u.parent().show()}if(g===t){u.parent().hide()}if(g>1&&g<t){r.parent().show();u.parent().show()}}return false;e.preventDefault()});v.hover(function(){clearInterval(w)},function(){if(a.$loopFlag===true){m()}});x.find("li a").hover(function(){clearInterval(w)},function(){if(a.$loopFlag===true){m()}});$(window).resize(function(){if(p!==false){clearTimeout(p)}p=setTimeout(function(){y.find("div.item").css("width","auto");y.css("width","auto").css("left","auto");q=s.width();k=l.width();y.find("div.item").css("width",k);y.css("width",q*(t+2))},100)});y.on({touchstart:function(i){this.startX=i.originalEvent.changedTouches[0].pageX;this.startY=i.originalEvent.changedTouches[0].pageY;this.touchX=i.originalEvent.changedTouches[0].pageX;this.slideX=$(this).position().left},touchmove:function(C){var B=this.startX-C.originalEvent.changedTouches[0].pageX;var i=this.startY-C.originalEvent.changedTouches[0].pageY;var A=B/i;if(A>Math.tan(15*Math.PI/180)){C.originalEvent.preventDefault()}this.slideX=this.slideX-(this.touchX-C.originalEvent.changedTouches[0].pageX);$(this).css({left:this.slideX});this.touchX=C.originalEvent.changedTouches[0].pageX},touchend:function(A){var i=this.startX-this.touchX;if(a.$loopFlag===false&&g===1&&i<0){$(this).animate({left:this.slideX+i})}if(a.$loopFlag===false&&g===t&&i>0){$(this).animate({left:this.slideX+i})}else{if(i<-50){j()}else{if(50<i){n();if(a.$loopFlag===false){clearInterval(w)}}else{$(this).animate({left:this.slideX+i})}}}}})})}});