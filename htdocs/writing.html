<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><title>執筆用 | ●●● | マイホームブログ | Web屋の芝生DIY</title><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="/shared/css/basic.css" media="all"></head><body class="lyt-main-sub turf"><div id="content"><main><div id="main-inner"><p class="main-visual"><img src="/wp-content/uploads/thum-turf.jpg" alt=""></p>


<!--======================================ここから記事用ソース======================================-->

<p><a href="/2016/09/160909_01/">ずいぶん前にWordPressのアイキャッチ画像を取得するphp</a>をご紹介させていただいたことがありましたが、has_post_thumbnail()やwp_get_attachment_image_src()を駆使するなどしてかなり冗長なコードを記述するものでした。</p>
<p>しかし、実はWordPress4.4からは画像のパスを取得できる<strong>the_post_thumbnail_url()</strong>関数が用意されているとのこと。そこで本記事では、アイキャッチ画像のパスのみを一発で取得できるthe_post_thumbnail_url()関数について使い方をまとめてみました。</p>
[adsense_top]
<h2 class="hdg-l2-01">サンプルコード</h2>
<h3 class="hdg-l3-01">the_post_thumbnail_url()</h3>
<p>現在見ている投稿記事に設定されているアイキャッチ画像のパスを呼び出すことができる関数です。</p>
<pre><code>&lt;img src=&quot;&lt;?php the_post_thumbnail_url(); ?&gt;&quot; alt=&quot;&quot;&gt;</code></pre>
<p>imgタグの中に記述すればアイキャッチを表示することができます。og:imageなどにも使えますね。以下のようにして引数を指定し、任意のサイズを表示することも可能です。</p>
<pre><code>&lt;img src=&quot;&lt;?php the_post_thumbnail_url(<strong>medium</strong>); ?&gt;&quot; alt=&quot;&quot;&gt;</code></pre>
<h3 class="hdg-l3-01">get_the_post_thumbnail_url()</h3>
<p>前述のthe_post_thumbnail_url()と違い、こちらはサイズに加えて投稿IDを引数に指定することができます。ただしget_the_post_thumbnail_url()単体ではソースにパスを出力しませんので、出力する際はechoと組み合わせて使用します。</p>
<pre><code>&lt;img src=&quot;&lt;?php echo get_the_post_thumbnail_url(); ?&gt;&quot; alt=&quot;&quot;&gt;</code></pre>
<p>使い所としては、例えば以下のように投稿IDを引数に指定し、閲覧している記事の前後の記事のアイキャッチ画像のパスを取得することができます。</p>
<pre><code>&lt;?php $prevpost = get_adjacent_post(true, '', true); if ($prevpost) : ?&gt;
&lt;img src=&quot;&lt;?php echo get_the_post_thumbnail_url($prevpost-&gt;ID,'medium');?&gt;&quot; alt=&quot;&quot;&gt;
&lt;?php endif; ?&gt;
&lt;?php $nextpost = get_adjacent_post(true, '', false); if ($nextpost) : ?&gt;
&lt;img src=&quot;&lt;?php echo get_the_post_thumbnail_url($nextpost-&gt;ID,'tmedium');?&gt;&quot; alt=&quot;&quot;&gt;
&lt;?php endif; ?&gt;</code></pre>
<h2 class="hdg-l2-01">まとめ</h2>
<p>Web屋の芝生DIYを構築した時はWordPress4.6だったので、既にその時からこの関数は使えたんですね。。。恥ずかしながら知らなかったです。<a href="/2016/09/160909_01/">こちらの記事で紹介している方法</a>でも相変わらずパスのみを取得することは可能ですが、the_post_thumbnail_url()関数を使えばかなりコードがスッキリしますね。</p>
<p>手間もかかるので既存のテンプレートソースをわざわざ置き換えるまではしませんが、今後Webサイトの改修でアイキャッチ部分を弄ぶ際は、積極的にこちらの関数を使っていこうと思います。</p>
<p>アイキャッチ画像のパスの取得したい際は、どうぞ本記事をご参考にしていただければ幸いです。</p>



<!--======================================ここまで記事用ソース======================================-->

<!--
<p><img src="/images/blog/2018/02/XX_01_XX.jpg" alt="" width="660" height=""></p>
<h2 class="hdg-l2-01">まとめ</h2>
<p></p>
-->

</div><!--/#main-inner--></main></div><!--/#content--><p class="page_top"><a href="#">ページの先頭に戻る</a></p><footer><p>&copy;2016 Web屋の芝生DIY All rights reserved.</p></footer><script src="//code.jquery.com/jquery-2.2.4.min.js"></script><script src="/shared/js/init.js"></script><script></script></body></html>